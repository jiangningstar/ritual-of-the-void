##iostat 

> 简介

```txt
iostat是对磁盘I/O的读写的监控命令, 汇报磁盘活动统计情况(针对整个系统)
```

> 命令手册

```txt
通过(man iostat)即可查看命令手册
```

> NAME

```txt
iostat - Report Central Processing Unit (CPU) statistics and input/output statistics for devices and partitions

iostat - 报告CPU和磁盘的输入/输出统计

```

> REPORTS

```txt
The iostat command generates two types of reports, the CPU Utilization report and the Device Utilization report

iostat 命令生成两种类型的报告, 一种是CPU利用率报告另一种是磁盘设备的利用率的报告

CPU Utilization Report
              The first report generated by the iostat command is the CPU Utilization Report. For multiprocessor systems, the CPU values are global  aver‐
              ages among all processors.  The report has the following format:

              %user
                     Show the percentage of CPU utilization that occurred while executing at the user level (application).

                     显示处在用户模式下CPU的时间百分比

              %nice
                     Show the percentage of CPU utilization that occurred while executing at the user level with nice priority.

                     显示在带NICE值的用户模式下的时间百分比

              %system
                     Show the percentage of CPU utilization that occurred while executing at the system level (kernel).

                     显示CPU处于系统模式下的时间百分比

              %iowait
                     Show the percentage of time that the CPU or CPUs were idle during which the system had an outstanding disk I/O request.

                     CPU等待输入输出完成时间的百分比

              %steal
                     Show  the  percentage of time spent in involuntary wait by the virtual CPU or CPUs while the hypervisor was servicing another virtual
                     processor.

                     管理程序维护另一个虚拟处理器时，虚拟CPU的无意识等待时间百分比

              %idle
                     Show the percentage of time that the CPU or CPUs were idle and the system did not have an outstanding disk I/O request.

                     CPU空闲时间百分比

 Device Utilization Report
              The second report generated by the iostat command is the Device Utilization Report. The device report provides statistics on a per  physical
              device  or partition basis. Block devices and partitions for which statistics are to be displayed may be entered on the command line.  If no
              device nor partition is entered, then statistics are displayed for every device used by the system, and providing that the kernel  maintains
              statistics  for  it.  If the ALL keyword is given on the command line, then statistics are displayed for every device defined by the system,
              including those that have never been used.  Transfer rates are shown in 1K blocks by default, unless the environment  variable  POSIXLY_COR‐
              RECT is set, in which case 512-byte blocks are used.  The report may show the following fields, depending on the flags used:

              Device:
                     This column gives the device (or partition) name as listed in the /dev directory.

              tps
                     Indicate the number of transfers per second that were issued to the device. A transfer is an I/O request to the device. Multiple log‐
                     ical requests can be combined into a single I/O request to the device. A transfer is of indeterminate size.

                     该设备每秒的传输次数

              Blk_read/s (kB_read/s, MB_read/s)
                     Indicate the amount of data read from the device expressed in a number of blocks (kilobytes, megabytes) per second. Blocks are equiv‐
                     alent to sectors and therefore have a size of 512 bytes.

              Blk_wrtn/s (kB_wrtn/s, MB_wrtn/s)
                     Indicate the amount of data written to the device expressed in a number of blocks (kilobytes, megabytes) per second.

              Blk_read (kB_read, MB_read)
                     The total number of blocks (kilobytes, megabytes) read.

              Blk_wrtn (kB_wrtn, MB_wrtn)
                     The total number of blocks (kilobytes, megabytes) written.

              rrqm/s
                     The number of read requests merged per second that were queued to the device.

              wrqm/s
                     The number of write requests merged per second that were queued to the device.

              r/s
                     The number (after merges) of read requests completed per second for the device.

              w/s
                     The number (after merges) of write requests completed per second for the device.

              rsec/s (rkB/s, rMB/s)
                     The number of sectors (kilobytes, megabytes) read from the device per second.

              wsec/s (wkB/s, wMB/s)
                     The number of sectors (kilobytes, megabytes) written to the device per second.

              avgrq-sz
                     The average size (in sectors) of the requests that were issued to the device.

              avgqu-sz
                     The average queue length of the requests that were issued to the device.

              await
                     The  average  time (in milliseconds) for I/O requests issued to the device to be served. This includes the time spent by the requests
                     in queue and the time spent servicing them.

              r_await
                     The average time (in milliseconds) for read requests issued to the device to be served. This includes the time spent by the  requests
                     in queue and the time spent servicing them.

              w_await
                     The average time (in milliseconds) for write requests issued to the device to be served. This includes the time spent by the requests
                     in queue and the time spent servicing them.

              svctm
                     The average service time (in milliseconds) for I/O requests that were issued to the device. Warning! Do  not  trust  this  field  any
                     more.  This field will be removed in a future sysstat version.

              %util
                     Percentage of elapsed time during which I/O requests were issued to the device (bandwidth utilization for the device). Device satura‐
                     tion occurs when this value is close to 100%.

```

> OPTIONS

```txt
       -c     Display the CPU utilization report.

       -d     Display the device utilization report.

       -g group_name { device [...] | ALL }
              Display statistics for a group of devices.  The iostat command reports statistics for each individual device in the  list  then  a  line  of
              global statistics for the group displayed as group_name and made up of all the devices in the list. The ALL keyword means that all the block
              devices defined by the system shall be included in the group.

       -h     Make the Device Utilization Report easier to read by a human.

       -j { ID | LABEL | PATH | UUID | ... } [ device [...] | ALL ]
              Display persistent device names. Options ID, LABEL, etc. specify the type of the persistent name. These options are not limited,  only  pre‐
              requisite  is  that  directory with required persistent names is present in /dev/disk.  Optionally, multiple devices can be specified in the
              chosen persistent name type.  Because persistent device names are usually long, option -h is enabled implicitly with this option.

       -k     Display statistics in kilobytes per second.

       -m     Display statistics in megabytes per second.

       -N     Display the registered device mapper names for any device mapper devices.  Useful for viewing LVM2 statistics.

       -p [ { device [,...] | ALL } ]
              The -p option displays statistics for block devices and all their partitions that are used by the system.  If a device name  is  entered  on
              the  command  line,  then statistics for it and all its partitions are displayed. Last, the ALL keyword indicates that statistics have to be
              displayed for all the block devices and partitions defined by the system, including those that have never been used. If option -j is defined
              before this option, devices entered on the command line can be specified with the chosen persistent name type.

       -T     This  option must be used with option -g and indicates that only global statistics for the group are to be displayed, and not statistics for
              individual devices in the group.

       -t     Print the time for each report displayed. The timestamp format may depend on the  value  of  the  S_TIME_FORMAT  environment  variable  (see
              below).

       -V     Print version number then exit.

       -x     Display extended statistics.

       -y     Omit first report with statistics since system boot, if displaying multiple records at given interval.

       -z     Tell iostat to omit output for any devices for which there was no activity during the sample period.

```